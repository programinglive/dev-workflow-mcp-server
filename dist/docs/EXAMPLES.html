<h1>Practical Examples for Dev-Workflow MCP Server</h1>
<p>This document provides real-world examples of using the dev-workflow MCP server in Antigravity.</p>
<h2>Table of Contents</h2>
<ul>
<li><a href="#simple-feature-development">Simple Feature Development</a></li>
<li><a href="#bug-fix-with-test-discovery">Bug Fix with Test Discovery</a></li>
<li><a href="#refactoring-workflow">Refactoring Workflow</a></li>
<li><a href="#using-run_full_workflow">Using run_full_workflow</a></li>
<li><a href="#multi-project-workflow">Multi-Project Workflow</a></li>
<li><a href="#per-user-workflow-isolation">Per-User Workflow Isolation</a></li>
<li><a href="#handling-test-failures">Handling Test Failures</a></li>
</ul>
<hr>
<h2>Simple Feature Development</h2>
<p><strong>Scenario:</strong> Adding a user profile avatar feature</p>
<h3>Step-by-Step</h3>
<p><strong>1. Start the task:</strong></p>
<pre><code>start_task:
  description: &quot;Add user avatar upload and display&quot;
  type: &quot;feature&quot;
</code></pre>
<p><strong>Response:</strong></p>
<pre><code>‚úÖ Task started: Add user avatar upload and display
üìù Task ID: task-20231122-001
üîÑ Phase: implementation
Next: Implement the feature, then mark as fixed
</code></pre>
<p><strong>2. Implement the feature:</strong></p>
<ul>
<li>Create <code>components/Avatar.jsx</code></li>
<li>Add upload functionality</li>
<li>Integrate with user profile page</li>
</ul>
<p><strong>3. Mark as fixed:</strong></p>
<pre><code>mark_bug_fixed:
  summary: &quot;Avatar component with upload, preview, and persistence&quot;
</code></pre>
<p><strong>4. Create tests:</strong></p>
<ul>
<li>Write <code>Avatar.test.jsx</code> with upload tests</li>
<li>Add integration tests for profile page</li>
</ul>
<pre><code>create_tests
</code></pre>
<p><strong>5. Run tests:</strong></p>
<pre><code class="language-bash">npm test
</code></pre>
<pre><code>run_tests:
  passed: true
  testCommand: &quot;npm test&quot;
  details: &quot;31 tests passed (27 existing + 4 new avatar tests)&quot;
</code></pre>
<p><strong>6. Document:</strong>
Update <code>README.md</code> with avatar component usage:</p>
<pre><code>create_documentation:
  documentationType: &quot;README&quot;
  summary: &quot;Added Avatar component documentation with API reference and examples&quot;
</code></pre>
<p><strong>7. Commit and push:</strong></p>
<pre><code>commit_and_push:
  commitMessage: &quot;feat(profile): add user avatar upload and display&quot;
</code></pre>
<p><strong>8. Release:</strong></p>
<pre><code>perform_release:
  command: &quot;npm run release:minor&quot;
  notes: &quot;v1.3.0 - User avatar feature&quot;
</code></pre>
<p><strong>9. Complete:</strong></p>
<pre><code>complete_task:
  commitMessage: &quot;feat(profile): add user avatar upload and display&quot;
</code></pre>
<hr>
<h2>Bug Fix with Test Discovery</h2>
<p><strong>Scenario:</strong> Fixing a date formatting bug discovered in production</p>
<h3>Workflow</h3>
<p><strong>1. Start:</strong></p>
<pre><code>start_task:
  description: &quot;Fix incorrect date format in transaction history&quot;
  type: &quot;bugfix&quot;
</code></pre>
<p><strong>2. Reproduce and fix:</strong></p>
<ul>
<li>Find the bug in <code>utils/formatDate.js</code></li>
<li>Fix the formatting logic</li>
<li>Verify the fix</li>
</ul>
<p><strong>3. Mark as fixed:</strong></p>
<pre><code>mark_bug_fixed:
  summary: &quot;Corrected date formatting to use ISO 8601 format&quot;
</code></pre>
<p><strong>4. Create regression test:</strong>
Create <code>utils/formatDate.test.js</code>:</p>
<pre><code class="language-javascript">describe(&#39;formatDate&#39;, () =&gt; {
  it(&#39;formats dates in ISO 8601 format&#39;, () =&gt; {
    const date = new Date(&#39;2023-11-22T10:30:00Z&#39;);
    expect(formatDate(date)).toBe(&#39;2023-11-22&#39;);
  });
  
  it(&#39;handles timezone correctly&#39;, () =&gt; {
    // Regression test for the bug
    const date = new Date(&#39;2023-11-22T23:00:00-05:00&#39;);
    expect(formatDate(date)).toBe(&#39;2023-11-22&#39;);
  });
});
</code></pre>
<pre><code>create_tests
</code></pre>
<p><strong>5. Run tests:</strong></p>
<pre><code>run_tests:
  passed: true
  testCommand: &quot;npm test -- utils/formatDate.test.js&quot;
  details: &quot;2 new tests pass, including regression test&quot;
</code></pre>
<p><strong>6. Document:</strong>
Update <code>CHANGELOG.md</code>:</p>
<pre><code>create_documentation:
  documentationType: &quot;changelog&quot;
  summary: &quot;Added bug fix entry for date formatting issue&quot;
</code></pre>
<p><strong>7. Commit:</strong></p>
<pre><code>commit_and_push:
  commitMessage: &quot;fix(utils): correct date formatting to use ISO 8601&quot;
</code></pre>
<p><strong>8. Release:</strong></p>
<pre><code>perform_release:
  command: &quot;npm run release:patch&quot;
  notes: &quot;v1.2.1 - Hotfix for date formatting&quot;
</code></pre>
<p><strong>9. Complete:</strong></p>
<pre><code>complete_task:
  commitMessage: &quot;fix(utils): correct date formatting to use ISO 8601&quot;
</code></pre>
<hr>
<h2>Refactoring Workflow</h2>
<p><strong>Scenario:</strong> Refactoring API service layer for better maintainability</p>
<h3>Workflow</h3>
<p><strong>1. Start:</strong></p>
<pre><code>start_task:
  description: &quot;Refactor API service layer to use interceptors pattern&quot;
  type: &quot;refactor&quot;
</code></pre>
<p><strong>2. Refactor code:</strong></p>
<ul>
<li>Extract common logic to interceptors</li>
<li>Update all API calls to use new pattern</li>
<li>Ensure backward compatibility</li>
</ul>
<p><strong>3. Mark as fixed:</strong></p>
<pre><code>mark_bug_fixed:
  summary: &quot;Refactored API service to use axios interceptors for auth and error handling&quot;
</code></pre>
<p><strong>4. Update existing tests:</strong>
Since this is a refactor, update existing tests to work with new structure:</p>
<pre><code>create_tests
</code></pre>
<p><strong>5. Run comprehensive test suite:</strong></p>
<pre><code>run_tests:
  passed: true
  testCommand: &quot;npm test -- --coverage&quot;
  details: &quot;All 127 tests pass. Coverage: 94% ‚Üí 96%&quot;
</code></pre>
<p><strong>6. Document changes:</strong>
Update inline comments and architecture docs:</p>
<pre><code>create_documentation:
  documentationType: &quot;inline-comments&quot;
  summary: &quot;Added JSDoc comments for interceptors and updated architecture diagram&quot;
</code></pre>
<p><strong>7. Commit:</strong></p>
<pre><code>commit_and_push:
  commitMessage: &quot;refactor(api): use interceptors pattern for auth and error handling&quot;
</code></pre>
<p><strong>8. Release:</strong></p>
<pre><code>perform_release:
  command: &quot;npm run release:minor&quot;
  notes: &quot;v1.4.0 - API service refactoring (internal improvement)&quot;
</code></pre>
<p><strong>9. Complete:</strong></p>
<pre><code>complete_task:
  commitMessage: &quot;refactor(api): use interceptors pattern for auth and error handling&quot;
</code></pre>
<hr>
<h2>Using run_full_workflow</h2>
<p><strong>Scenario:</strong> Quick feature when you know all the details upfront</p>
<p>The <code>run_full_workflow</code> tool executes all workflow steps in one call:</p>
<pre><code>run_full_workflow:
  summary: &quot;Add dark mode toggle to settings&quot;
  testCommand: &quot;npm test&quot;
  testsPassed: true
  testDetails: &quot;3 new tests for dark mode: all pass&quot;
  documentationType: &quot;README&quot;
  documentationSummary: &quot;Added dark mode section to README with usage&quot;
  commitMessage: &quot;feat(ui): add dark mode toggle to settings&quot;
  releaseCommand: &quot;npm run release:minor&quot;
  releaseNotes: &quot;v1.5.0 - Dark mode support&quot;
</code></pre>
<p>This single call:</p>
<ol>
<li>‚úÖ Marks the feature as fixed</li>
<li>‚úÖ Records test creation</li>
<li>‚úÖ Records test execution</li>
<li>‚úÖ Records documentation</li>
<li>‚úÖ Checks ready to commit</li>
<li>‚úÖ Commits and pushes</li>
<li>‚úÖ Performs release</li>
<li>‚úÖ Completes the task</li>
</ol>
<p><strong>When to use:</strong></p>
<ul>
<li>Simple, well-defined features</li>
<li>You&#39;ve already done the work and just need to record it</li>
<li>Batch processing multiple small changes</li>
</ul>
<p><strong>When not to use:</strong></p>
<ul>
<li>Complex features requiring step-by-step verification</li>
<li>When tests might fail (you need to fix them first)</li>
<li>Learning the workflow for the first time</li>
</ul>
<hr>
<h2>Multi-Project Workflow</h2>
<p><strong>Scenario:</strong> Working on multiple projects with separate workflow histories</p>
<h3>Setup</h3>
<p>Each project gets its own <code>.state/workflow-state.json</code>:</p>
<pre><code class="language-bash"># Project A
cd ~/projects/frontend-app
npm install @programinglive/dev-workflow-mcp-server

# Project B  
cd ~/projects/backend-api
npm install @programinglive/dev-workflow-mcp-server
</code></pre>
<h3>Usage</h3>
<p>Workflows are automatically isolated by project:</p>
<p><strong>In frontend-app:</strong></p>
<pre><code>start_task:
  description: &quot;Add checkout flow&quot;
  type: &quot;feature&quot;

# Work on frontend...
# Complete workflow...
</code></pre>
<p><strong>In backend-api:</strong></p>
<pre><code>start_task:
  description: &quot;Add payment webhook endpoint&quot;
  type: &quot;feature&quot;

# Work on backend...
# Complete workflow...
</code></pre>
<p>Each project tracks its own:</p>
<ul>
<li>Current task</li>
<li>Workflow phase</li>
<li>History</li>
</ul>
<p>View history for current project:</p>
<pre><code>view_history:
  limit: 5
</code></pre>
<p>This shows only the history for the current project!</p>
<hr>
<h2>Per-User Workflow Isolation</h2>
<p><strong>Scenario:</strong> Multiple developers on the same machine or shared repository</p>
<h3>Configuration</h3>
<p>Set unique user IDs for each developer:</p>
<p><strong>Developer 1 (Alice):</strong></p>
<pre><code class="language-json">{
  &quot;mcpServers&quot;: {
    &quot;dev-workflow&quot;: {
      &quot;command&quot;: &quot;node&quot;,
      &quot;args&quot;: [&quot;d:\\code\\dev-workflow-mcp-server\\index.js&quot;],
      &quot;env&quot;: {
        &quot;DEV_WORKFLOW_USER_ID&quot;: &quot;alice&quot;
      }
    }
  }
}
</code></pre>
<p><strong>Developer 2 (Bob):</strong></p>
<pre><code class="language-json">{
  &quot;mcpServers&quot;: {
    &quot;dev-workflow&quot;: {
      &quot;command&quot;: &quot;node&quot;,
      &quot;args&quot;: [&quot;d:\\code\\dev-workflow-mcp-server\\index.js&quot;],
      &quot;env&quot;: {
        &quot;DEV_WORKFLOW_USER_ID&quot;: &quot;bob&quot;
      }
    }
  }
}
</code></pre>
<h3>Result</h3>
<p>Workflow states are isolated:</p>
<ul>
<li><code>.state/users/alice/workflow-state.db</code> - Alice&#39;s history</li>
<li><code>.state/users/bob/workflow-state.db</code> - Bob&#39;s history</li>
</ul>
<p>Each developer can:</p>
<ul>
<li>Work on different tasks simultaneously</li>
<li>Have independent workflow phases</li>
<li>View their own history without seeing others</li>
</ul>
<h3>Web Dashboard</h3>
<p>View specific user&#39;s history:</p>
<pre><code class="language-bash">npm run web
# Opens http://localhost:3111

# Filter by user:
# http://localhost:3111?user=alice
# http://localhost:3111?user=bob
</code></pre>
<hr>
<h2>Handling Test Failures</h2>
<p><strong>Scenario:</strong> Tests fail during workflow</p>
<h3>Workflow with Failure</h3>
<p><strong>1. Start and implement:</strong></p>
<pre><code>start_task:
  description: &quot;Add email validation to signup form&quot;
  type: &quot;feature&quot;

mark_bug_fixed:
  summary: &quot;Email validation with regex and domain verification&quot;

create_tests
</code></pre>
<p><strong>2. Run tests (they fail!):</strong></p>
<pre><code>run_tests:
  passed: false
  testCommand: &quot;npm test&quot;
  details: &quot;2 of 4 tests failed: Invalid email format not caught&quot;
</code></pre>
<p><strong>Response:</strong></p>
<pre><code>‚ùå Tests FAILED!
üö´ Cannot proceed to commit with failing tests
üìù Current phase: testing (blocked)

You must:
1. Fix the failing tests
2. Re-run tests with passed: true
</code></pre>
<p><strong>3. Fix the bugs:</strong></p>
<ul>
<li>Update validation regex</li>
<li>Fix edge case handling</li>
</ul>
<p><strong>4. Run tests again:</strong></p>
<pre><code>run_tests:
  passed: true
  testCommand: &quot;npm test&quot;
  details: &quot;All 4 tests now pass&quot;
</code></pre>
<p><strong>Response:</strong></p>
<pre><code>‚úÖ Tests passed!
‚úÖ Testing phase complete
Next: Create documentation
</code></pre>
<p><strong>5. Continue workflow:</strong></p>
<pre><code>create_documentation:
  documentationType: &quot;inline-comments&quot;
  summary: &quot;Added validation rules documentation&quot;

commit_and_push:
  commitMessage: &quot;feat(auth): add email validation to signup&quot;

perform_release:
  command: &quot;npm run release:minor&quot;

complete_task:
  commitMessage: &quot;feat(auth): add email validation to signup&quot;
</code></pre>
<h3>Key Takeaway</h3>
<p><strong>The workflow blocks commits when tests fail!</strong> This enforces quality and prevents broken code from reaching your repository.</p>
<hr>
<h2>Advanced: Skipping Tests</h2>
<p><strong>Scenario:</strong> Manual testing required (mobile app, hardware integration, etc.)</p>
<pre><code>start_task:
  description: &quot;Add iOS biometric authentication&quot;
  type: &quot;feature&quot;

mark_bug_fixed:
  summary: &quot;Face ID and Touch ID integration complete&quot;

skip_tests:
  reason: &quot;Biometric auth requires physical iOS device testing; automated tests not feasible. Manual QA completed on iPhone 14 Pro and iPhone 12.&quot;
</code></pre>
<p><strong>Response:</strong></p>
<pre><code>‚ö†Ô∏è  Tests skipped with justification
‚úÖ Testing phase marked as satisfied
üìù Task flagged for manual verification

Reason: Biometric auth requires physical iOS device testing; automated tests not feasible. Manual QA completed on iPhone 14 Pro and iPhone 12.

Next: Create documentation
</code></pre>
<p><strong>When to skip tests:</strong></p>
<ul>
<li>Hardware-dependent features</li>
<li>Manual UI testing on specific devices</li>
<li>Third-party service integration (with mocking limitations)</li>
</ul>
<p><strong>Best practice:</strong> Always provide detailed justification for audit trail.</p>
<hr>
<h2>Next Steps</h2>
<ul>
<li>Check <a href="./WORKFLOW-TEMPLATES.md">WORKFLOW-TEMPLATES.md</a> for ready-to-use templates</li>
<li>See <a href="./TROUBLESHOOTING.md">TROUBLESHOOTING.md</a> for common issues</li>
<li>Return to <a href="./GETTING-STARTED.md">GETTING-STARTED.md</a> for setup instructions</li>
</ul>
<hr>
<p><strong>Happy coding with disciplined workflows!</strong> üéØ</p>
